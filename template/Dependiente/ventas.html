{% extends "Dependiente/dependiente.html" %}
{% load static %}
{% block contenido %}
<style>
table{
    overflow-y: auto;
    width: 100%;
    max-width: 800px;
    min-width: 500px;
    margin: 20px auto;
    border-collapse: collapse;
}
.table-with-y-overflow {
    display: block;
    max-height: 300px; /* Ajusta la altura máxima según tus necesidades */
    overflow-y: auto;
  }
  
  .table-with-y-overflow > .table {
    margin-bottom: 0;
  }
  
th,td{
    padding: 8px;
    text-align: left;
}
.table-bordered th,
.table-bordered td {
  border-color: #ccc; /* Cambiar el color de las líneas */
  border-width: 2px; /* Cambiar el grosor de las líneas */
  border-style: double; /* Cambiar el estilo de las líneas */
}
@media (max-width: 768px){
    table{
        font-size: 14px;
    }
    th,td{
        padding: 5px;
       
    }
}
</style>
<div class="sidebar" id="sidebar" method="post" enctype="text/plain">
    <div class="slider-container" style="background-color: #e0861009; height: 500px;">
        <div class="slider-content" id="slider" >
            <div class="accordion" id="accordionExample" style="height: 100%;">
                {% for v in compras %}
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#venta{{v.compra.id}}" aria-expanded="true" aria-controls="collapseOne" style="background-color: #f0f0f0; color: #333;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="{% if v.compra.pendiente == False %}red{% else %}green{% endif %}" class="bi bi-circle-fill mx-4" viewBox="0 0 16 16">
                                    <circle cx="8" cy="8" r="8" />
                                </svg>
                                {{v.compra.fecha}}
                            </button>
                        </h2>
                        <div id="venta{{v.compra.id}}"
                            class="accordion-collapse collapse show"
                            data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                                <div class="table-responsive" >
                                    <p class="my-auto">Direccion: {{v.compra.clienteid.direccion}}</p>                                    
                                    <table class="shop-table cart-table py-4 table-with-y-overflow">
                                        <thead style="overflow-y: auto;">
                                            <tr>
                                                <th class="px-4"><span>Foto</span></th>
                                                <th class="px-4">Producto</th>
                                                <th class="px-4"><span>Precio</span></th>
                                                <th class="px-4"><span>Catidad</span></th>
                                                <th class="px-4"><span>Subtotal</span></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for prc in v.detalles %}
                                            <tr>
                                                <td
                                                    class="product-thumbnail px-4 py-4">
                                                    <figure>
                                                        <a
                                                            href="product-simple.html">
                                                            <img
                                                                src="{{prc.detalle.productoid.urlimagen}}"
                                                                width="100"
                                                                height="100"
                                                                alt="product">
                                                        </a>
                                                    </figure>
                                                </td>
                                                <td
                                                    class="product-name px-4 py-4">
                                                    <div
                                                        class="product-name-section">
                                                        <p>{{prc.detalle.productoid.nombre}}</p>
                                                    </div>
                                                </td>
                                                <td
                                                    class="product-subtotal px-4 py-4">
                                                    <span
                                                        class="amount">${{prc.detalle.productoid.precio}}</span>
                                                </td>
                                                <td
                                                    class="product-subtotal px-4 py-4">
                                                    <span
                                                        class="amount">{{prc.detalle.cantidad}}</span>
                                                </td>

                                                <td
                                                    class="product-subtotal px-4 py-4">
                                                    <span
                                                        class="amount">${{prc.subtotal}}</span>
                                                </td>
                                            </tr>
                                            {% endfor %}
                                            <tr>
                                                <td colspan="4"> Total: </td>
                                                <td>$ {{v.total}}</td>
                                            </tr>
                                            {% if v.compra.pendiente == True %}
                                                <tr>
                                                    <td colspan="4">
                                                        <a href="../../../../../../../dependiente/ventas/entrega/{{v.compra.id}}" type="button" class="btn btn-primary">Realizar Entrega</a>
                                                    </td>
                                                </tr>
                                            {% endif %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}